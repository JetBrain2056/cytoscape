<header id="header" class="navbar navbar-dark navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand">
      {{ name }}
        {# <img src="./image/metro-logo.png" width="20" height="20" alt=""> #}
    </a>
    {% if logged %}
        <nav class="d-flex me-lg-3">        
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse"  id="navbarNavDropdown" >          
            <ul class="nav navbar-nav align-items-center gap-2" id="nav-tab" role="tablist">             
              <li class="nav-item">
                <a class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home"  role="tab" aria-controls="nav-home" aria-selected="false">
                  Dashboard
                </a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-bs-toggle="dropdown" aria-expanded="true">
                  References
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown1">                 
                  <div class="nav-item flex-column" aria-orientation="vertical">
                    <button class="dropdown-item" id="nav-stations-tab" data-bs-toggle="tab" data-bs-target="#nav-stations" type="button" role="tab" aria-controls="nav-stations" aria-selected="false" onclick="show_station_table()">Станции</button>                    
                    <button class="dropdown-item" id="nav-lines-tab"    data-bs-toggle="tab" data-bs-target="#nav-lines"    type="button" role="tab" aria-controls="nav-lines"    aria-selected="false" onclick="show_line_table()">Линии метро</button>                    
                    <button class="dropdown-item" id="nav-objects-tab"  data-bs-toggle="tab" data-bs-target="#nav-objects"  type="button" role="tab" aria-controls="nav-objects"  aria-selected="false" onclick="show_object_table()">Объекты</button>
                    <button class="dropdown-item" id="nav-units-tab"    data-bs-toggle="tab" data-bs-target="#nav-units"    type="button" role="tab" aria-controls="nav-units"    aria-selected="false" onclick="show_unit_table()">Устройства</button>                    
                    <button class="dropdown-item" id="nav-edges-tab"    data-bs-toggle="tab" data-bs-target="#nav-edges"    type="button" role="tab" aria-controls="nav-users"    aria-selected="false" onclick="show_cable_table()">Оптоволоконные связи </button>                    
                  </div>        
                </ul>
              </li>       
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button" data-bs-toggle="dropdown" aria-expanded="true">
                  Tools
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown2">
                  <div class="nav-item flex-column" aria-orientation="vertical">
                    <button class="dropdown-item" id="nav-arm-tab" onclick="show_modal_arm()">АРМ</button>
                    <hr class="dropdown-divider"></hr>
                    <button class="dropdown-item" id="nav-export-tab" onclick="show_modal_export()">Экспорт</button>
                    <button class="dropdown-item" id="nav-import-tab" onclick="show_modal_import()">Импорт</button>
                    <button class="dropdown-item" id="nav-mimport-tab" onclick="mview_import()">M-View Загрузка</button>
                    <hr class="dropdown-divider"></hr>
                    <button class="dropdown-item">Start</button>
                    <button class="dropdown-item">finish</button>
                    <button class="dropdown-item" id="clear">clear...</button>
                    <hr class="dropdown-divider"></hr>
                    <button class="dropdown-item" onclick="collapse_node()">Collapse node</button>
                    <button class="dropdown-item" onclick="unwrap_node()">Unwrap node</button>               
                    <button class="dropdown-item" onclick="arrange_node()">Arrange_node</button>
                  </div>    
                </div>
              </li>               
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button" data-bs-toggle="dropdown" aria-expanded="true">
                  Administration
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown2">    
                  <div class="nav-item flex-column" aria-orientation="vertical">
                    <button class="dropdown-item" id="nav-users-tab" data-bs-toggle="tab" data-bs-target="#nav-users" type="button" role="tab" aria-controls="nav-users" aria-selected="false" onclick="showUserTable()">Пользователи</button>                    
                    <button class="dropdown-item" id="nav-roles-tab" data-bs-toggle="tab" data-bs-target="#nav-roles" type="button" role="tab" aria-controls="nav-roles" aria-selected="false" onclick="showRoleTable()">Роли</button>                               
                  </div>
                </ul>  
              </li>   
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown3" role="button" data-bs-toggle="dropdown" aria-expanded="true">
                  <i class="fa fa-bars" aria-hidden="true"></i>
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown3">                
                  <button class="dropdown-item" data-bs-toggle="modal" data-bs-target="#exampleModal">About...</button>                  
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link d-flex gap-1 align-items-center" aria-current="page" href="#">
                  <i class="fa fa-user" aria-hidden="true"></i>
                  <span>{{ username }}</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="{{ logout }}"><i class="fa fa-sign-out"></i></a>
              </li>
            </ul>
          </div>
        </nav>
    {% endif %}    
  </div>
</header>

{# Modal #}
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{ about_program }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
      </div>
      <div class="modal-body">
        Developer LLC "BRS", www.brainrs.com
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{{ button_close }}</button>
      </div>
    </div>
  </div>
</div>
{# Modal Import#}
<div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="importModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="importModalLabel">Импорт</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
      </div>
      <div class="modal-body">
        <div class="container">
        <h5>Upload Excel...</h5>
        <br>
        <form>
          <div class="form-group form-control">
            <label for="excelFile">Selected file:</label>
            <input type="file" class="form-control-file" id="excelFile">
          </div>
          <label for="importStatus">Upload status:</label>
          <input type="text"  class="form-control" id="importStatus" disabled>
          <br>
          <button type="button" class="btn btn-primary" onclick="handleFile()">Upload...</button>
        </form>
      </div>
      </div>
      {# <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">{{ button_close }}</button>
      </div> #}
    </div>
  </div>
</div>
{# Modal Export#}
<div class="modal fade" id="exportModal" tabindex="-1" aria-labelledby="exportModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exportModalLabel">Export</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
      </div>
      <div class="modal-body">
        <div class="container">
        <h5>Export Excel...</h5>
        <br>
        <form>
          <button class="btn btn-primary" type="button" onclick="exportExcel()">Save...</button>
        </form>
      </div>
      </div>
      {# <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">{{ button_close }}</button>
      </div> #}
    </div>
  </div>
</div>
